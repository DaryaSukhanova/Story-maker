<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1000" viewbox="0 0 1000 1000"><rect stroke="black" stroke-width="2" fill="none" x="160.5" y="57" width="42" height="50" id="animatedElementId"></rect><path stroke="red" stroke-width="2" fill="none" id="motionPath" d="M 495.5 43 L 495.5 42 L 496.5 41 L 497.5 40 L 498.5 39 L 499.5 39 L 499.5 38 L 500.5 37 L 501.5 36 L 502.5 35 L 503.5 35 L 504.5 34 L 504.5 33 L 506.5 33 L 507.5 33 L 508.5 32 L 510.5 31 L 511.5 31 L 514.5 29 L 515.5 29 L 517.5 28 L 518.5 27 L 520.5 27 L 521.5 27 L 524.5 26 L 526.5 25 L 528.5 24 L 530.5 24 L 532.5 24 L 534.5 23 L 537.5 23 L 539.5 22 L 541.5 22 L 543.5 21 L 545.5 21 L 547.5 21 L 550.5 21 L 551.5 21 L 553.5 20 L 556.5 20 L 558.5 20 L 560.5 20 L 562.5 20 L 565.5 20 L 567.5 20 L 569.5 20 L 571.5 20 L 573.5 20 L 575.5 20 L 577.5 20 L 580.5 20 L 582.5 20 L 584.5 20 L 586.5 20 L 588.5 20 L 590.5 21 L 593.5 22 L 595.5 23 L 596.5 23 L 598.5 24 L 599.5 25 L 600.5 25 L 602.5 26 L 603.5 27 L 604.5 27 L 606.5 27 L 607.5 28 L 608.5 29 L 609.5 29 L 610.5 30 L 611.5 31 L 611.5 32 L 612.5 32 L 612.5 33 L 612.5 34 L 612.5 35 L 612.5 36 L 612.5 37 L 612.5 38 L 612.5 39 L 612.5 40 L 612.5 41 L 612.5 42 L 612.5 43 L 611.5 44 L 610.5 45 L 610.5 46 L 609.5 46 L 609.5 48 L 608.5 48 L 607.5 49 L 607.5 50 L 606.5 51 L 605.5 52 L 604.5 53 L 602.5 53 L 601.5 54 L 599.5 55 L 598.5 55 L 597.5 56 L 595.5 57 L 594.5 57 L 593.5 58 L 591.5 59 L 589.5 59 L 588.5 60 L 586.5 61 L 584.5 62 L 582.5 62 L 581.5 63 L 578.5 64 L 576.5 64 L 574.5 64 L 573.5 64 L 571.5 64 L 569.5 64 L 567.5 64 L 565.5 64 L 563.5 64 L 562.5 64 L 560.5 64 L 558.5 64 L 557.5 64 L 555.5 64 L 554.5 64 L 552.5 64 L 551.5 64 L 549.5 64 L 548.5 64 L 546.5 64 L 545.5 64 L 544.5 64 L 542.5 64 L 541.5 64 L 540.5 64 L 539.5 64 L 538.5 64 L 537.5 64 L 536.5 64 L 535.5 64 L 533.5 64 L 532.5 64 L 531.5 64 L 530.5 64 L 529.5 64 L 529.5 65 L 529.5 66 L 529.5 67 L 529.5 68 L 529.5 69 L 529.5 70 L 529.5 71 L 529.5 72 L 530.5 72 L 531.5 73 L 531.5 74 L 532.5 76 L 533.5 77 L 533.5 78 L 534.5 80 L 535.5 81 L 535.5 82 L 536.5 84 L 537.5 85 L 537.5 86 L 539.5 88 L 540.5 89 L 542.5 91 L 543.5 92 L 545.5 94 L 546.5 95 L 547.5 96 L 549.5 98 L 550.5 99 L 552.5 101 L 555.5 102 L 556.5 104 L 558.5 105 L 561.5 107 L 563.5 108 L 564.5 110 L 567.5 111 L 568.5 112 L 570.5 113 L 572.5 113 L 574.5 114 L 575.5 115 L 576.5 115 L 578.5 116 L 579.5 117 L 580.5 117 L 582.5 118 L 583.5 119 L 584.5 119 L 585.5 119 L 586.5 119 L 587.5 119 L 587.5 120 L 586.5 120 L 586.5 121 L 585.5 121 L 584.5 121 L 584.5 122 L 583.5 123 L 582.5 123 L 581.5 123 L 581.5 124 L 580.5 124 L 580.5 125 L 579.5 126 L 578.5 126 L 577.5 127 L 576.5 127 L 576.5 128 L 575.5 128 L 574.5 129 L 573.5 130 L 572.5 130 L 571.5 131 L 570.5 131 L 569.5 131 L 568.5 132"></path><script>
            <![CDATA[
                this.play = true
                this.currentSpeed = 20
                let distanceCovered = 0;
                let isAnimationSaved = false;
                
                function animate(element) {
    const motionPath = document.getElementById('motionPath');
    const totalLength = motionPath.getTotalLength();
    distanceCovered = 0;
    let speed = this.currentSpeed;
    element.setAttribute("x", 0);
    element.setAttribute("y", 0);
    const moveAlongPath = () => {
      if (this.play) {
        const point = motionPath.getPointAtLength(distanceCovered);
        if (element.hasAttribute("d")) {
          const initialX = element.getPointAtLength(0).x;
          const initialY = element.getPointAtLength(0).y;
          element.setAttribute("transform", `translate(${point.x - initialX} ${point.y - initialY})`);
        } else {
          element.setAttribute("transform", `translate(${point.x} ${point.y})`);
        }
        speed = this.currentSpeed;
        distanceCovered += speed;
        if (distanceCovered <= totalLength) {
          requestAnimationFrame(moveAlongPath);
        } else {
          distanceCovered = 0;
          const newStartTime = Date.now();
          // animationToolState.setStartTime(newStartTime);
          requestAnimationFrame(moveAlongPath);
          if (!isAnimationSaved) {
            isAnimationSaved = true;
            this.saveAnimatedSvg();
          }
        }
      } else {
        requestAnimationFrame(moveAlongPath);
      }
    };
    moveAlongPath();
  }
                const animatedElement = document.getElementById('animatedElementId');
                animate(animatedElement);
            ]]>
        </script></svg>